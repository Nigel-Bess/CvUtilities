[Unit]
Description=redis worker tmux session, will not restart on program exit, will on powercycle

[Service]
Type=oneshot
User=fulfil
Group=fulfil
WorkingDirectory=/home/fulfil/code/Fulfil.TrayCountAPI
RemainAfterExit=yes
ExecStart=/usr/bin/tmux new-session -d -s redis_worker \; send-keys -t 0 "source venv/bin/activate" Enter \; send-keys -t 0 "python3 model_app/redis/rq_spinup.py" Enter 
ExecStop=/usr/bin/tmux kill-session -t redis_worker
KillMode=none


[Install]
WantedBy=multi-user.target
